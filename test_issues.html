<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø—Ä–æ–±–ª–µ–º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ–±–ª–µ–º—ã"</h1>
    
    <div class="info">
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –≤ localStorage –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ–±–ª–µ–º—ã" –≤ –æ—Ç—á–µ—Ç–∞—Ö.</p>
    </div>

    <button class="btn" onclick="createTestData()">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏</button>
    <button class="btn" onclick="clearTestData()">–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    <button class="btn" onclick="showCurrentData()">–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ</button>
    <button class="btn" onclick="goToReports()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ç—á–µ—Ç–∞–º</button>

    <div id="result"></div>

    <script>
        function createTestData() {
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
            const testOrders = [
                {
                    id: "test-order-1",
                    number: "TEST-001",
                    client: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 1",
                    manager: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 1",
                    product: "–ú–µ—Ç–∞–ª–ª–æ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
                    operationType: "–ú–µ—Ç–∞–ª–ª–æ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
                    date: "2025-01-10",
                    currentSection: "cutting",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-10T10:00:00.000Z"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-1",
                            description: "–ù–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞",
                            user: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                            timestamp: "2025-01-10T14:30:00.000Z",
                            resolved: false
                        },
                        {
                            id: "issue-2", 
                            description: "–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–∞–≤–∫–∏ –º–µ—Ç–∞–ª–ª–∞ –Ω–∞ 2 –¥–Ω—è",
                            user: "–ú–µ–Ω–µ–¥–∂–µ—Ä",
                            timestamp: "2025-01-11T09:15:00.000Z",
                            resolved: true
                        }
                    ]
                },
                {
                    id: "test-order-2",
                    number: "TEST-002",
                    client: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 2",
                    manager: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 2",
                    product: "–°–≤–∞—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã",
                    operationType: "–°–≤–∞—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã",
                    date: "2025-01-12",
                    currentSection: "welding",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-12T10:00:00.000Z"
                        },
                        {
                            section: "welding",
                            timestamp: "2025-01-13T08:00:00.000Z"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-3",
                            description: "–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–∞—á–µ—Å—Ç–≤–æ–º —Å–≤–∞—Ä–Ω–æ–≥–æ —à–≤–∞, —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–¥–µ–ª–∫–∏",
                            user: "–°–≤–∞—Ä—â–∏–∫ –ò–≤–∞–Ω–æ–≤",
                            timestamp: "2025-01-13T16:20:00.000Z",
                            resolved: false
                        }
                    ]
                },
                {
                    id: "test-order-3",
                    number: "TEST-003",
                    client: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 3",
                    manager: "–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç 3",
                    product: "–ü–æ–∫—Ä–∞—Å–∫–∞ –∏–∑–¥–µ–ª–∏–π",
                    operationType: "–ü–æ–∫—Ä–∞—Å–∫–∞ –∏–∑–¥–µ–ª–∏–π",
                    date: "2025-01-08",
                    currentSection: "painting",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-08T10:00:00.000Z"
                        },
                        {
                            section: "welding",
                            timestamp: "2025-01-09T08:00:00.000Z"
                        },
                        {
                            section: "painting",
                            timestamp: "2025-01-10T12:00:00.000Z"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-4",
                            description: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –∫—Ä–∞—Å–∫–∏, –∑–∞–∫–∞–∑—á–∏–∫ –Ω–µ –¥–æ–≤–æ–ª–µ–Ω",
                            user: "–ú–∞–ª—è—Ä –ü–µ—Ç—Ä–æ–≤",
                            timestamp: "2025-01-10T15:45:00.000Z",
                            resolved: false
                        },
                        {
                            id: "issue-5",
                            description: "–î–µ—Ñ–µ–∫—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø–æ–∫—Ä–∞—Å–∫–∏",
                            user: "–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞",
                            timestamp: "2025-01-11T11:30:00.000Z",
                            resolved: true
                        }
                    ]
                }
            ];

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('ordersData', JSON.stringify(testOrders));
            
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if (!localStorage.getItem('userProfile')) {
                const testProfile = {
                    name: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                    role: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('userProfile', JSON.stringify(testProfile));
            }

            document.getElementById('result').innerHTML = `
                <div class="info success">
                    <h3>‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã!</h3>
                    <p>–°–æ–∑–¥–∞–Ω–æ ${testOrders.length} –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏:</p>
                    <ul>
                        <li><strong>TEST-001</strong>: 2 –ø—Ä–æ–±–ª–µ–º—ã (1 –∞–∫—Ç–∏–≤–Ω–∞—è, 1 —Ä–µ—à–µ–Ω–Ω–∞—è)</li>
                        <li><strong>TEST-002</strong>: 1 –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞</li>
                        <li><strong>TEST-003</strong>: 2 –ø—Ä–æ–±–ª–µ–º—ã (1 –∞–∫—Ç–∏–≤–Ω–∞—è, 1 —Ä–µ—à–µ–Ω–Ω–∞—è)</li>
                    </ul>
                    <p><strong>–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º:</strong> 5 (3 –∞–∫—Ç–∏–≤–Ω—ã—Ö, 2 —Ä–µ—à–µ–Ω–Ω—ã—Ö)</p>
                </div>
            `;
        }

        function clearTestData() {
            localStorage.removeItem('ordersData');
            localStorage.removeItem('userProfile');
            document.getElementById('result').innerHTML = `
                <div class="info">
                    <h3>üóëÔ∏è –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã</h3>
                    <p>–í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã –∏–∑ localStorage</p>
                </div>
            `;
        }

        function showCurrentData() {
            const ordersData = localStorage.getItem('ordersData');
            const userProfile = localStorage.getItem('userProfile');
            
            let result = '<div class="info"><h3>üìä –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage:</h3>';
            
            if (ordersData) {
                const orders = JSON.parse(ordersData);
                const totalIssues = orders.reduce((total, order) => 
                    total + (order.issues ? order.issues.length : 0), 0);
                
                result += `
                    <p><strong>–ó–∞–∫–∞–∑—ã:</strong> ${orders.length}</p>
                    <p><strong>–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º:</strong> ${totalIssues}</p>
                `;
            } else {
                result += '<p>‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–∫–∞–∑–∞—Ö</p>';
            }
            
            if (userProfile) {
                const profile = JSON.parse(userProfile);
                result += `<p><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> ${profile.name}</p>`;
            } else {
                result += '<p>‚ùå –ù–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>';
            }
            
            result += '</div>';
            document.getElementById('result').innerHTML = result;
        }

        function goToReports() {
            window.location.href = 'reports.html';
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showCurrentData();
    </script>
</body>
</html>
