<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .btn:hover {
            background: #0056b3;
        }
        .success {
            background: #28a745;
        }
        .success:hover {
            background: #1e7e34;
        }
        .info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .result {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</h1>
    
    <div class="info">
        <p><strong>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–±–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ–±–ª–µ–º—ã" –≤ –æ—Ç—á–µ—Ç–∞—Ö.</strong></p>
        <p>–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∞—à–±–æ—Ä–¥ ‚Üí –û—Ç—á–µ—Ç—ã ‚Üí –≤–∫–ª–∞–¥–∫–∞ "‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã"</p>
    </div>

    <button class="btn success" onclick="addTestIssues()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏</button>
    <button class="btn" onclick="openDashboard()">üìä –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥</button>

    <div id="result"></div>

    <script>
        function addTestIssues() {
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
            const testOrders = [
                {
                    id: "test-001",
                    number: "TEST-001",
                    client: "–û–û–û –¢–µ—Å—Ç-–ö–ª–∏–µ–Ω—Ç 1",
                    manager: "–û–û–û –¢–µ—Å—Ç-–ö–ª–∏–µ–Ω—Ç 1",
                    product: "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
                    operationType: "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è",
                    date: "2025-01-10",
                    currentSection: "cutting",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-10T10:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-1",
                            description: "–û–±–Ω–∞—Ä—É–∂–µ–Ω –±—Ä–∞–∫ –≤ –º–µ—Ç–∞–ª–ª–µ - —Ç—Ä–µ—â–∏–Ω—ã –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏. –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.",
                            user: "–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ –ò–≤–∞–Ω–æ–≤",
                            timestamp: "2025-01-10T14:30:00.000Z",
                            resolved: false
                        },
                        {
                            id: "issue-2",
                            description: "–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–∞–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞ –Ω–∞ 2 –¥–Ω—è –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.",
                            user: "–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–∫—É–ø–æ–∫",
                            timestamp: "2025-01-11T09:15:00.000Z",
                            resolved: true
                        }
                    ]
                },
                {
                    id: "test-002",
                    number: "TEST-002",
                    client: "–ò–ü –¢–µ—Å—Ç–æ–≤—ã–π 2",
                    manager: "–ò–ü –¢–µ—Å—Ç–æ–≤—ã–π 2",
                    product: "–°–≤–∞—Ä–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
                    operationType: "–°–≤–∞—Ä–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
                    date: "2025-01-12",
                    currentSection: "welding",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-12T10:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        },
                        {
                            section: "welding",
                            timestamp: "2025-01-13T08:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-3",
                            description: "–ù–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–∞—Ä–Ω–æ–π —à–æ–≤ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ ‚Ññ5. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–≤–∞—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ì–û–°–¢.",
                            user: "–°–≤–∞—Ä—â–∏–∫ –ü–µ—Ç—Ä–æ–≤ –ê.–ò.",
                            timestamp: "2025-01-13T16:20:00.000Z",
                            resolved: false
                        }
                    ]
                },
                {
                    id: "test-003",
                    number: "TEST-003",
                    client: "–ó–∞–≤–æ–¥ –¢–µ—Å—Ç–æ–≤—ã–π",
                    manager: "–ó–∞–≤–æ–¥ –¢–µ—Å—Ç–æ–≤—ã–π",
                    product: "–ü–æ–∫—Ä–∞—Å–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã",
                    operationType: "–ü–æ–∫—Ä–∞—Å–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã",
                    date: "2025-01-08",
                    currentSection: "painting",
                    history: [
                        {
                            section: "cutting",
                            timestamp: "2025-01-08T10:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        },
                        {
                            section: "welding",
                            timestamp: "2025-01-09T08:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        },
                        {
                            section: "painting",
                            timestamp: "2025-01-10T12:00:00.000Z",
                            user: "–°–∏—Å—Ç–µ–º–∞"
                        }
                    ],
                    issues: [
                        {
                            id: "issue-4",
                            description: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –∫—Ä–∞—Å–∫–∏ - –∑–∞–∫–∞–∑—á–∏–∫ –ø—Ä–æ—Å–∏—Ç RAL 5015, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω RAL 5005.",
                            user: "–ú–∞–ª—è—Ä –°–∏–¥–æ—Ä–æ–≤",
                            timestamp: "2025-01-10T15:45:00.000Z",
                            resolved: false
                        },
                        {
                            id: "issue-5",
                            description: "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø–æ–¥—Ç–µ–∫–∏ –∫—Ä–∞—Å–∫–∏ –Ω–∞ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∏–∑–¥–µ–ª–∏—è –ø–æ—Å–ª–µ –ø–æ–∫—Ä–∞—Å–∫–∏.",
                            user: "–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –û–¢–ö",
                            timestamp: "2025-01-11T11:30:00.000Z",
                            resolved: true
                        }
                    ]
                }
            ];

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ localStorage
            localStorage.setItem('ordersData', JSON.stringify(testOrders));
            
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if (!localStorage.getItem('userProfile')) {
                const testProfile = {
                    name: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                    role: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('userProfile', JSON.stringify(testProfile));
            }

            // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const totalIssues = testOrders.reduce((total, order) => 
                total + (order.issues ? order.issues.length : 0), 0);
            
            const activeIssues = testOrders.reduce((total, order) => {
                if (!order.issues) return total;
                return total + order.issues.filter(issue => !issue.resolved).length;
            }, 0);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            document.getElementById('result').innerHTML = `
                <div class="result">
                    <h3>‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!</h3>
                    <p><strong>–°–æ–∑–¥–∞–Ω–æ:</strong></p>
                    <ul>
                        <li>üõ†Ô∏è <strong>${testOrders.length}</strong> —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤</li>
                        <li>‚ö†Ô∏è <strong>${totalIssues}</strong> –ø—Ä–æ–±–ª–µ–º (${activeIssues} –∞–∫—Ç–∏–≤–Ω—ã—Ö, ${totalIssues - activeIssues} —Ä–µ—à–µ–Ω–Ω—ã—Ö)</li>
                    </ul>
                    <p><strong>–î–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º:</strong></p>
                    <ul>
                        <li><strong>TEST-001:</strong> 2 –ø—Ä–æ–±–ª–µ–º—ã (–±—Ä–∞–∫ –º–µ—Ç–∞–ª–ª–∞, –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–∞–≤–∫–∏)</li>
                        <li><strong>TEST-002:</strong> 1 –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (–Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–∞—Ä–Ω–æ–π —à–æ–≤)</li>
                        <li><strong>TEST-003:</strong> 2 –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç –∫—Ä–∞—Å–∫–∏, –ø–æ–¥—Ç–µ–∫–∏)</li>
                    </ul>
                    <p><strong>–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∞—à–±–æ—Ä–¥ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É "‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã" –≤ —Ä–∞–∑–¥–µ–ª–µ "üìã –û—Ç—á–µ—Ç—ã"</strong></p>
                </div>
            `;
        }

        function openDashboard() {
            window.open('mobile_order_dashboard.html', '_blank');
        }
    </script>
</body>
</html>
